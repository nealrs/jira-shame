services:
  jira-shame:
    build: .
    ports:
      - "1337:3000"
    environment:
      - JIRA_HOST=${JIRA_HOST}
      - JIRA_EMAIL=${JIRA_EMAIL}
      - JIRA_API_TOKEN=${JIRA_API_TOKEN}
      - BOARD_ID=${JIRA_BOARD_ID}
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - GITHUB_ORG=${GITHUB_ORG}
      - NODE_ENV=${NODE_ENV}
      - DEBUG=${DEBUG}
      - TZ=${TZ:-America/New_York}
    volumes:
      # Mount source code for hot reloading (exclude node_modules)
      - ./server.js:/app/server.js
      - ./templates:/app/templates
      - ./public:/app/public
      - ./img:/app/img
    command: npm run dev
    restart: unless-stopped
